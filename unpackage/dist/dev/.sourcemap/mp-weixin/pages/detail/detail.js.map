{"version":3,"sources":["uni-app:///main.js","webpack:////Users/qc/Desktop/千城文件夹/uniapp/千变万幻/pages/detail/detail.vue?23dc","webpack:////Users/qc/Desktop/千城文件夹/uniapp/千变万幻/pages/detail/detail.vue?6a8b","webpack:////Users/qc/Desktop/千城文件夹/uniapp/千变万幻/pages/detail/detail.vue?1019","webpack:////Users/qc/Desktop/千城文件夹/uniapp/千变万幻/pages/detail/detail.vue?de83","uni-app:///pages/detail/detail.vue","webpack:////Users/qc/Desktop/千城文件夹/uniapp/千变万幻/pages/detail/detail.vue?efe3","webpack:////Users/qc/Desktop/千城文件夹/uniapp/千变万幻/pages/detail/detail.vue?0f10"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","customUI","name","data","loadmore","loging","items","item_id","itemshow","placeholder","show","userid","skeleton","detailid","tagstyle","p","detaillist","imagearr","comments","article_id","comment_type","usercomments","onReachBottom","onLoad","methods","giveName","giveAvatar","datano","uni","title","icon","setTimeout","url","zezhao","tfvok","reoveEnv","usercomment","commentstemp","usertemp","db","res","idarr","comment_status","reply_comment_id","arplyarr","newarr","usercommie","e","user_id","comment_date","clicklike","usersimage","liketemp","updateinc","getdata","getOne"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,mWAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAm1B,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;AC8Ev2B;AAGA;AAGA;AAGA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAdA;AACA;AACA;EACAC;AACA;AAAA,eAaA;EACAC;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAEAC;MAAA;;MAEAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;QAAA;QACAC;MACA;MACAC;MAAA;MACAC;MACAC;QACAC;QACAC;MACA;;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;MAEA;MACA;IACA;IAEA;EAEA;EACAC;IACA;IACA;IACA;MACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAEA;;EACAC;IACAC;IACAC;IACA;IACAC;MACAC;QACAC;QACAC;MACA;MACAC;QACAH;UACAI;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MAAA;MAAA;MACA;MACAH;QACA;MACA;;MAGA;IACA;IAGA;IACAI;MAEA;QACA;UACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;MACA;IAEA;IAIA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAC;gBAAA;gBAAA,OACAC;cAAA;gBAAAC;gBAEA;gBACAC;kBACA;gBACA;gBAAA;gBAAA,OACAF;kBACAG;kBACAC;gBACA;cAAA;gBAHAC;gBAKAJ;kBACA;oBACA;kBACA;kBACA;gBACA;gBAEAK;gBAGA;kBACA;kBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAGA;IACAC;MAEA,0DACAC;QACAC;QACAC;MAAA,GACA;IACA;IAEAC;MAAA;;MAEA;MACA;QACA;QACAtB;UACAC;UACAC;QACA;QACA;MACA;MACA;MAEA;MACA;MAEA;IAGA;IACAqB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAC;gBACAd;gBAAA;gBAAA,OACAC;cAAA;gBAAAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAa;MAAA;MACA;AACA;AACA;AACA;AACA;AACA;MACAA;IACA;IAEAC;MAAA;MAAA;MACA;MACA;MACA,iFACA;MAEA;MACA;MACAf;QACAgB;MACA;QAEA;UACA;UACA;QACA;QACA;QACA3B;UACAC;QACA;QACA;QACA;QACA;QACAW;QACA;MAEA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrTA;AAAA;AAAA;AAAA;AAA8jD,CAAgB,m6CAAG,EAAC,C;;;;;;;;;;;ACAllD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/detail/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=3e159eb4&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/detail/detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=3e159eb4&\"","var components\ntry {\n  components = {\n    uSkeleton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-skeleton/u-skeleton\" */ \"@/uni_modules/uview-ui/components/u-skeleton/u-skeleton.vue\"\n      )\n    },\n    uniDateformat: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    },\n    uParse: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-parse/u-parse\" */ \"@/uni_modules/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-empty/u-empty\" */ \"@/uni_modules/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    commentItem: function () {\n      return import(\n        /* webpackChunkName: \"components/comment-item/comment-item\" */ \"@/components/comment-item/comment-item.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uOverlay: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-overlay/u-overlay\" */ \"@/uni_modules/uview-ui/components/u-overlay/u-overlay.vue\"\n      )\n    },\n    scrollviewbox: function () {\n      return import(\n        /* webpackChunkName: \"components/scrollviewbox/scrollviewbox\" */ \"@/components/scrollviewbox/scrollviewbox.vue\"\n      )\n    },\n    commentFrame: function () {\n      return import(\n        /* webpackChunkName: \"components/comment-frame/comment-frame\" */ \"@/components/comment-frame/comment-frame.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = !_vm.skeleton ? _vm.giveAvatar(_vm.detaillist) : null\n  var m1 = !_vm.skeleton ? _vm.giveName(_vm.detaillist) : null\n  var g0 = _vm.usercomments.length\n  var g1 = _vm.usercomments.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"detail\">\r\n\t\t<view class=\"container\">\r\n\r\n\t\t\t<view v-if=\"skeleton\">\r\n\t\t\t\t<u-skeleton rows=\"5\" title loading></u-skeleton>\r\n\t\t\t</view>\r\n\t\t\t<view v-else>\r\n\t\t\t\t<view class=\"title\">{{detaillist.title}}</view>\r\n\t\t\t\t<view class=\"userinfo\">\r\n\t\t\t\t\t<view class=\"avatar\">\r\n\t\t\t\t\t\t<image :src=\"giveAvatar(detaillist)\" mode=\"aspectFill\"></image>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text\">\r\n\t\t\t\t\t\t<view class=\"name\">{{giveName(detaillist)}}</view>\r\n\t\t\t\t\t\t<view class=\"small\">\r\n\t\t\t\t\t\t\t<uni-dateformat :date=\"detaillist.publish_date\" format=\"yyyy年MM月dd日 hh:mm:ss\">\r\n\t\t\t\t\t\t\t</uni-dateformat> · 发布于{{detaillist.province}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<u-parse :content=\"detaillist.content\" :tagStyle=\"tagstyle\"></u-parse>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"like\">\r\n\t\t\t\t\t<view class=\"btn\" @click=\"clicklike\" :class=\"detaillist.userlike ? 'active':''\">\r\n\t\t\t\t\t\t<text class=\"iconfont icon-like-fill\"></text>\r\n\t\t\t\t\t\t<text>{{!detaillist.like_count ? '': detaillist.like_count}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"users\">\r\n\t\t\t\t\t\t<image v-for=\"(item,index) in this.imagearr\" :key=\"index\" src=\"../../static/iconfont/username.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text\"><text class=\"num\">{{detaillist.view_count}}</text>人看过</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"comment\" >\n\t\t\t\t<view v-if=\"usercomments.length<1\" style=\"margin-bottom: 90rpx;\">\n\t\t\t\t\t<u-empty mode=\"comment\" icon=\"https://cdn.uviewui.com/uview/empty/comment.png\">\n\t\t\t\t\t\t\n\t\t\t\t\t</u-empty>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t</view>\r\n\t\t<!--评论信息  -->\r\n\t\t\t<view class=\"cotent\">\n\t\t\t\t<view class=\"item\" v-for=\"item in usercomments\" :key=\"item._id\">\n\t\t\t\t\t<comment-item @click.native=\"tfvok()\" @reoveEnv=\"reoveEnv\" :usercomments=\"item\" :userid=\"userid\" ></comment-item>\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</view>\n\t\t\t\t<!-- 触底 -->\n\t\t\t\t<view v-if=\"usercomments.length >3 \">\n\t\t\t\t\t<uni-load-more :status=\"loadmore\"></uni-load-more>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 弹起盒子 -->\n\t\t\t<u-overlay :show=\"show\" :z-index =\"990\" @click=\"zezhao()\"></u-overlay>\n\t\t\t<scrollviewbox v-if=\"show\" ref=\"refsa\" :usercomments=\"items\" :userid=\"item_id\"></scrollviewbox>\n\t\t\t\n\t\t<!-- 评论输入 -->\t\n\t\t\r\n\t\t\t<comment-frame :comments=\"comments\" :placeholder=\"placeholder\" @usercommie=\"usercommie\"></comment-frame>\r\n\t\t\t\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<!-- 详情页面 -->\r\n<script>\r\n\tconst db = uniCloud.database()\n\tconst dbCmd=db.command\r\n\tconst updateinc = uniCloud.importObject(\"utilsObj\", {\r\n\t\tcustomUI: true\r\n\t})\r\n\timport {\r\n\t\tstore,\r\n\t} from '@/uni_modules/uni-id-pages/common/store.js'\r\n\timport {\r\n\t\tislick\r\n\t} from \"@/utils/islike.js\"\r\n\timport {\r\n\t\tgiveName,\r\n\t\tgiveAvatar\r\n\t} from \"@/utils/tools.js\"\r\n\n\r\n\texport default {\r\n\t\tname: \"detail\",\r\n\t\tdata() {\r\n\t\t\treturn {\n\t\t\t\tloadmore:\"more\",  //触底加载更多\n\t\t\t\tloging:false,//触底的判断\n\t\t\t\titems:\"\",//弹起盒子的值\n\t\t\t\titem_id:\"\",//弹起盒子的ID\n\t\t\t\titemshow:true,\n\t\t\t\t\n\t\t\t\tplaceholder:\"说点什么把٩(◕‿◕｡)۶\",//提示用户输入\n\t\t\t\t\n\t\t\t\tshow:false,\n\t\t\t\tuserid:\"\",\r\n\t\t\t\tskeleton: true, //骨架\r\n\t\t\t\tdetailid: \"\", //获取上一页的ID\r\n\t\t\t\ttagstyle: { //修改富文本渲染器\r\n\t\t\t\t\tp: \"line-height:1.7em;font-size:16px;\"\r\n\t\t\t\t},\r\n\t\t\t\tdetaillist: null, //从数据库拿的数据\r\n\t\t\t\timagearr:[],\n\t\t\t\tcomments:{\n\t\t\t\t\tarticle_id:\"\",\n\t\t\t\t\tcomment_type:0,  //分级\n\t\t\t\t},\r\n\t\t\t\tusercomments:[],//用户评论数据\r\n\t\t\t};\r\n\t\t},\n\t\tonReachBottom() {//触底函数\n\t\t\tthis.loadmore=\"loading\"\n\t\t\tif(this.loging) {\n\t\t\t\t\n\t\t\t\t this.loadmore=\"noMore\"\n\t\t\t\t return\n\t\t\t}\n\t\t\n\t\t\tthis.usercomment()\n\t\t\t\n\t\t},\r\n\t\tonLoad(e) {\n\t\t\t// store.userInfo._id\r\n\t\t\tthis.userid=uniCloud.getCurrentUserInfo().uid\r\n\t\t\tif (!e.id) {\r\n\t\t\t\tthis.datano()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.usersimage()\r\n\t\t\tthis.detailid = e.id\n\t\t\tthis.comments.article_id=e.id\r\n\t\t\tthis.getdata()\r\n\t\t\tthis.updateinc() //自增\n\t\t\tthis.usercomment() //评论\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgiveName,\r\n\t\t\tgiveAvatar,\r\n\t\t\t//判断是否有ID or 错误页面\r\n\t\t\tdatano() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"参数有误\",\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: \"/pages/forum/forum\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 800)\r\n\t\t\t},\n\t\t\tzezhao(){//遮挡层\n\t\t\t\tthis.$refs.refsa.shownoyime()\n\t\t\t\tthis.show = false\n\t\t\t\tthis.loging=false\n\t\t\t\t// this.usercomments=[]\n\t\t\t\t// this.usercomment()\n\t\t\t},\n\t\t\t\n\t\t\ttfvok(){//盒子\n\t\t\t\tthis.show=true\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.$refs.refsa.showtime()\n\t\t\t\t},100)\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// console.log(this.$refs.refsa.showtime());\n\t\t\t},\n\t\t\n\t\t\t\n\t\t\t//删除的回调\n\t\t\treoveEnv(e){\n\t\t\t\t\n\t\t\t\tif(e.id){\n\t\t\t\t\tlet index=this.usercomments.findIndex(item=>{\n\t\t\t\t\t\treturn item._id==e.id\n\t\t\t\t\t})\n\t\t\t\t\tthis.usercomments.splice(index,1)\n\t\t\t\t}else{\n\t\t\t\t\tthis.items=e.item\n\t\t\t\t\tthis.item_id=e._id\n\t\t\t\t\tthis.itemshow=false\n\t\t\t\t\tthis.tfvok()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t//用户评论 获取列表数\n\t\t\tasync usercomment(){\n\t\t\t\tlet commentstemp= db.collection(\"qianhuan-news-comments\").where(`article_id == \"${this.detailid}\" && comment_status!= 1 && comment_type !=1`).orderBy(\"comment_date desc\").skip(this.usercomments.length).limit(5).getTemp()\n\t\t\t\tlet usertemp = db.collection(\"uni-id-users\").field(\"_id,username,nickname,avatar_file\").getTemp()\n\t\t\t\tlet res=await db.collection(commentstemp,usertemp).get()\n\t\t\n\t\t\t\t//获取评论回复数量\n\t\t\t\tlet idarr=res.result.data.map(item=>{\n\t\t\t\t\treturn item._id\n\t\t\t\t})\n\t\t\t\t let arplyarr=await db.collection(\"qianhuan-news-comments\").where({\t\t\t\t\t\n\t\t\t\t\tcomment_status:0,\n\t\t\t\t\treply_comment_id:dbCmd.in(idarr),\n\t\t\t\t}).groupBy('reply_comment_id').groupField('count(*) as field4').get()\n\t\t\t\n\t\t\t\tres.result.data.forEach(item=>{\n\t\t\t\t\tlet index=arplyarr.result.data.findIndex(find=>{\n\t\t\t\t\t\treturn\tfind.reply_comment_id  == item._id \n\t\t\t\t\t})\n\t\t\t\t\tif(index > -1) item.field4=arplyarr.result.data[index].field4\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tlet newarr=[...this.usercomments,...res.result.data]\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif(res.result.data==0){ \n\t\t\t\t\tthis.loadmore=\"noMore\"\n\t\t\t\t\tthis.loging=true\n\t\t\t\t}\n\t\t\t\tthis.usercomments=newarr\n\t\t\t\n\t\t\t\t\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t//评论传过来的自定义事件\n\t\t\tusercommie(e){\n\t\t\t\n\t\t\t\tthis.usercomments.unshift({\n\t\t\t\t\t...e,\n\t\t\t\t\tuser_id:[store.userInfo,],\n\t\t\t\t\tcomment_date:Date.now()\n\t\t\t\t})\n\t\t\t},\n\t\t\t\r\n\t\t\tclicklike() { //点赞按钮\r\n\t\t\t\t\n\t\t\t\tlet nowtime=Date.now()\n\t\t\t\tif(nowtime - this.detaillist.nowtime < 3000 ){\n\t\t\t\t\tthis.detaillist.nowtime=nowtime\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle:\"操作频繁\",\n\t\t\t\t\t\ticon:\"none\"\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.detaillist.nowtime=nowtime\n\t\t\t\t\n\t\t\t\tthis.detaillist.userlike ? this.detaillist.like_count-- : this.detaillist.like_count++\n\t\t\t\tthis.detaillist.userlike = !this.detaillist.userlike\n\t\t\t\t\n\t\t\t\tislick(this.detailid)//封装的函数\n\t\t\t\t\r\n\r\n\t\t\t},\r\n\t\t\tasync usersimage() { //获取页面浏览过的用户头像\r\n\r\n\t\t\t\tlet liketemp = db.collection(\"qianhuan_news_like\").where(`article_id == \"${this.detailid}\"`).getTemp()\r\n\t\t\t\tlet usertemp = db.collection(\"uni-id-users\").field(\"_id,avatar_file\").getTemp()\r\n\t\t\t\tlet res= await db.collection(usertemp, liketemp).get()\r\n\t\t\t\tthis.imagearr=res.result.data\r\n\t\t\t},\r\n\r\n\t\t\tupdateinc() { //访问量++++++\r\n\t\t\t\t/**\r\n\t\t\t\t * @param {Object} table \t//数据表\r\n\t\t\t\t * @param {Object} attr \t//属性\r\n\t\t\t\t * @param {Object} id\t\t//id\r\n\t\t\t\t * @param {Object} num\t\t//1=自增，-1自减\r\n\t\t\t\t */\r\n\t\t\t\tupdateinc.addingOrTaking(\"qianhuan-news-articles\", \"view_count\", this.detailid, 3)\r\n\t\t\t},\r\n\r\n\t\t\tgetdata() { //发请求，从数据库拿页面数据\r\n\t\t\t\tlet arttemp = db.collection(\"qianhuan-news-articles\").where(`_id=='${this.detailid}'`).getTemp();\r\n\t\t\t\tlet usertemp = db.collection(\"uni-id-users\").field(\"_id,username,nickname,avatar_file\").getTemp()\r\n\t\t\t\tlet userlike = db.collection(\"qianhuan_news_like\").where(\r\n\t\t\t\t\t`article_id==\"${this.detailid}\" && user_id==$cloudEnv_uid `).getTemp();\r\n\r\n\t\t\t\tlet taemparr = [arttemp, usertemp]\r\n\t\t\t\tif (store.hasLogin) taemparr.push(userlike)\r\n\t\t\t\tdb.collection(...taemparr).get({\r\n\t\t\t\t\tgetOne: true\r\n\t\t\t\t}).then(res => {\r\n\r\n\t\t\t\t\tif (!res.result.data) {\r\n\t\t\t\t\t\tthis.datano()\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.skeleton = false\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: res.result.data.title\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//获取点赞数组，如果有，把值付为ture\r\n\t\t\t\t\tlet likeuser = false\r\n\t\t\t\t\tif (store.hasLogin) likeuser = res.result.data._id.qianhuan_news_like.length ? true : false\r\n\t\t\t\t\tres.result.data.userlike = likeuser\r\n\t\t\t\t\tthis.detaillist = res.result.data\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.detail {\r\n\t\tbackground: #f8f8f8;\r\n\t\tmin-height: calc(100vh - var(--window-top));\r\n\n\t\t.cotent{\n\t\t\tborder-radius: 3%;\n\t\t\tpadding: 30rpx;\n\t\t\tpadding-bottom: 90rpx;\n\t\t\tbackground-color:#f8f8f8 ;\n\t\t\t\n\t\t}\n\t\t\r\n\t\t.container {\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tbackground: #fff;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 46rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tline-height: 1.4em;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.userinfo {\r\n\t\t\t\tpadding: 20rpx 0 50rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.avatar {\r\n\t\t\t\t\twidth: 60rpx;\r\n\t\t\t\t\theight: 60rpx;\r\n\t\t\t\t\tpadding-right: 15rpx;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #555;\r\n\r\n\t\t\t\t\t.small {\r\n\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.content {}\r\n\r\n\t\t\t.like {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 80rpx 50rpx 50rpx;\r\n\r\n\t\t\t\t.btn {\r\n\t\t\t\t\twidth: 260rpx;\r\n\t\t\t\t\theight: 120rpx;\r\n\t\t\t\t\tbackground: #e4e4e4;\r\n\t\t\t\t\tborder-radius: 100rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tfont-size: 50rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.active {\r\n\t\t\t\t\t\tbackground: #7a50bb;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.text {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\r\n\t\t\t\t\t.num {\r\n\t\t\t\t\t\tcolor: #0199FE\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.spot {\r\n\t\t\t\t\t\tpadding: 0 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.users {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tpadding: 30rpx 0;\r\n\r\n\t\t\t\t\timage {\r\n\t\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\tborder: 3px solid #fff;\r\n\t\t\t\t\t\tmargin-left: -20rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1680202283407\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}